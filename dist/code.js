(()=>{"use strict";figma.showUI(__html__,{width:320,height:600,themeColors:!0}),figma.ui.onmessage=e=>{if("count-screens"===e.type){const t=function(e){const t=figma.currentPage.selection.filter(e=>"FRAME"===e.type||"COMPONENT"===e.type||"INSTANCE"===e.type).map(e=>({name:e.name,id:e.id,type:e.type}));let i=[],a=0,o=[];if(e&&e.trim()){const r=e.split(",").map(e=>e.trim()).filter(e=>e.length>0),n=new Map,s=[];r.forEach(e=>{n.set(e,[])}),t.forEach(e=>{let t=!1;for(const i of r)if(e.name.toLowerCase().startsWith(i.toLowerCase())){n.get(i).push(e),t=!0;break}t||s.push(e)}),r.forEach(e=>{const t=n.get(e);t.length>0&&o.push({prefix:e,frames:t})}),a=o.length+s.length,i=[...o.flatMap(e=>e.frames),...s]}else i=t;return{total:t.length,filtered:i.length,prefix:e||"",matches:i,groupedCount:e?a:void 0,prefixGroups:e?o:void 0}}(e.prefix);figma.ui.postMessage({type:"count-result",result:t})}else"generate-frame"===e.type?async function(e){const t=figma.createFrame();t.name="Screen Count Summary",t.layoutMode="VERTICAL",t.primaryAxisSizingMode="AUTO",t.counterAxisSizingMode="AUTO",t.resize(800,600),t.fills=[{type:"SOLID",color:{r:.98,g:.95,b:.87}}],t.cornerRadius=16,t.effects=[{type:"DROP_SHADOW",color:{r:0,g:0,b:0,a:.1},offset:{x:0,y:4},radius:12,visible:!0,blendMode:"NORMAL"}],t.paddingTop=40,t.paddingBottom=40,t.paddingLeft=40,t.paddingRight=40,t.itemSpacing=24;const i=figma.createFrame();i.name="Header",i.layoutMode="HORIZONTAL",i.primaryAxisSizingMode="AUTO",i.counterAxisSizingMode="AUTO",i.itemSpacing=24,i.paddingTop=24,i.paddingBottom=24,i.paddingLeft=32,i.paddingRight=32,i.fills=[{type:"SOLID",color:{r:1,g:.8,b:.4}}],i.cornerRadius=12;const a=figma.createText();await figma.loadFontAsync({family:"Inter",style:"Bold"}),a.fontName={family:"Inter",style:"Bold"},a.fontSize=48,a.fills=[{type:"SOLID",color:{r:.2,g:.3,b:.4}}];const o=e.prefix&&void 0!==e.groupedCount?e.groupedCount:e.total;a.characters=`${o} Screen${1!==o?"s":""}`,i.appendChild(a);const r=figma.createFrame();r.name="Dev Note",r.layoutMode="VERTICAL",r.primaryAxisSizingMode="AUTO",r.counterAxisSizingMode="AUTO",r.paddingTop=12,r.paddingBottom=12,r.paddingLeft=16,r.paddingRight=16,r.fills=[{type:"SOLID",color:{r:1,g:.9,b:.5}}],r.cornerRadius=8;const n=figma.createText();await figma.loadFontAsync({family:"Inter",style:"Medium"}),n.fontName={family:"Inter",style:"Medium"},n.fontSize=16,n.fills=[{type:"SOLID",color:{r:.2,g:.3,b:.4}}],n.characters="👨‍💻 Dev Note",r.appendChild(n),i.appendChild(r),t.appendChild(i),i.layoutMode="HORIZONTAL",i.primaryAxisSizingMode="AUTO",i.counterAxisSizingMode="AUTO",i.layoutGrow=1,i.resize(720,120),i.counterAxisAlignItems="CENTER";const s=figma.createLine();s.resize(720,0),s.strokes=[{type:"SOLID",color:{r:1,g:.8,b:.4}}],s.strokeWeight=3,t.appendChild(s);const l=figma.createFrame();if(l.name="Content AutoLayout",l.layoutMode="VERTICAL",l.primaryAxisSizingMode="AUTO",l.counterAxisSizingMode="AUTO",l.itemSpacing=16,l.paddingTop=0,l.paddingBottom=0,l.paddingLeft=0,l.paddingRight=0,l.fills=[],t.appendChild(l),e.prefixGroups&&e.prefixGroups.length>0){for(const[t,i]of e.prefixGroups.entries()){const e=figma.createFrame();e.layoutMode="HORIZONTAL",e.primaryAxisSizingMode="AUTO",e.counterAxisSizingMode="AUTO",e.itemSpacing=16,e.fills=[],e.paddingTop=0,e.paddingBottom=0,e.paddingLeft=0,e.paddingRight=0;const a=figma.createText();a.fontName={family:"Inter",style:"Medium"},a.fontSize=32,a.fills=[{type:"SOLID",color:{r:.2,g:.3,b:.4}}],a.characters=`${t+1}. ${i.prefix}`,e.appendChild(a);const o=figma.createText();await figma.loadFontAsync({family:"Inter",style:"Regular"}),o.fontName={family:"Inter",style:"Regular"},o.fontSize=32,o.fills=[{type:"SOLID",color:{r:.4,g:.5,b:.6}}],o.characters=`(${i.frames.length} frame${1!==i.frames.length?"s":""})`,e.appendChild(o),l.appendChild(e)}const t=new Set(e.prefixGroups.flatMap(e=>e.frames.map(e=>e.id))),i=e.matches.filter(e=>!t.has(e.id));for(const[t,a]of i.entries()){const i=figma.createText();i.fontName={family:"Inter",style:"Medium"},i.fontSize=32,i.fills=[{type:"SOLID",color:{r:.2,g:.3,b:.4}}],i.characters=`${e.prefixGroups.length+t+1}. ${a.name}`,l.appendChild(i)}}else for(const[t,i]of e.matches.entries()){const e=figma.createText();e.fontName={family:"Inter",style:"Medium"},e.fontSize=32,e.fills=[{type:"SOLID",color:{r:.2,g:.3,b:.4}}],e.characters=`${t+1}. ${i.name}`,l.appendChild(e)}t.resize(800,t.height);const d=figma.viewport.center;return t.x=d.x-400,t.y=d.y-t.height/2,figma.currentPage.appendChild(t),figma.currentPage.selection=[t],figma.viewport.scrollAndZoomIntoView([t]),t}(e.result).then(()=>{figma.ui.postMessage({type:"frame-generated",success:!0})}).catch(e=>{figma.ui.postMessage({type:"frame-generated",success:!1,error:e.message})}):"select-frame"===e.type?figma.getNodeByIdAsync(e.frameId).then(e=>{e&&"visible"in e&&"locked"in e&&(figma.currentPage.selection=[e],figma.viewport.scrollAndZoomIntoView([e]))}):"close-plugin"===e.type&&figma.closePlugin()}})();